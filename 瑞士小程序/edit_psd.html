<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/style.css"/>
		<link rel="stylesheet" type="text/css" href="css/font.css"/>
		<script src="js/jquery-3.4.1.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="layer/layer.js" type="text/javascript" charset="utf-8"></script>
		<style type="text/css">
			.anniu{margin-top: 20%;}
		</style>
	</head>
	<body>
		<h1 class="h1">
			<button class="iconfont icon-xiangzuo1" onclick="javascript:history.back(-1);"></button>
	    	<p>设置/修改登录密码</p>
		</h1>
		<div class="big_box">
			<div class="input_i">
				<label>手机号</label>
				<input type="number" value="" class="mobile" placeholder="请输入手机号"/>
			</div>
			<div class="backcolor"></div>
			<div class="input_i input_line">
				<label>验证码</label>
				<input type="number" value="" class="code" placeholder="请输入验证码" />
				<input type="button" class="getCode1" id="getCode"  value="获取验证码">
			</div>
			<div class="backcolor"></div>
			<div class="input_i input_line">
				<label>旧密码</label>
				<input type="password" value="" class="psd" placeholder="请输入旧密码" />
			</div>
			<div class="backcolor"></div>
			<div class="input_i input_line">
				<label>新密码</label>
				<input type="password" value="" class="re_psd" placeholder="请输入新密码" />
			</div>
			<div class="backcolor"></div>
			<div class="anniu">确认</div>
		</div>
	</body>
	<script src="js/check.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		//获取手机验证码
		$("#getCode").click(function(){
			var that=this;
			getyan(that);
		})
		
		$(".anniu").click(function(){
			var mobile=$(".mobile").val();
			var code=$(".code").val();
			var psd=$(".psd").val();
			var re_psd=$(".re_psd").val();
			// 是否非空
			if(!isKong(mobile,$(".mobile").attr("placeholder"))){
				$(".mobile").focus();
				return false;
			}
			if(!telCheck(mobile)){
				$(".mobile").focus();
				return false;
			}
			if(!isKong(code,$(".code").attr("placeholder"))){
				$(".code").focus();
				return false;
			}
			if(!isKong(psd,$(".psd").attr("placeholder"))){
				$(".psd").focus();
				return false;
			}
			if(!CheckPw(psd)){
				$(".psd").focus();
				return false;
			}
			if(!isKong(re_psd,$(".re_psd").attr("placeholder"))){
				$(".re_psd").focus();
				return false;
			}
			if(!CheckPw(re_psd)){
				$(".re_psd").focus();
				return false;
			}
			$.ajax({
	            type: "POST",
	            contentType:"application/json",
		        url:'',
	            async: false,
	            data : {},
	            success: function(data) {
	            	console.log(data)
					if(data.code == 0){
						layer.msg(data.msg,{icon:6,time:1000});
	    			}else{
						layer.msg(data.msg,{icon:2,time:1000});
					}
				},
				error:function(data){
			        console.log(data);
			    }
	        })
		})
	</script>
</html>
